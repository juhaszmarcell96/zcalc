<!DOCTYPE html>
<html>
<style>
    html, body {
        margin: 0;
        padding: 0;
        overflow: hidden; /* Prevent scrollbars */
        width: 100%;
        height: 100%;
    }
    
    canvas {
        display: block; /* Prevents extra space below canvas */
    }
</style>
<body>


<canvas id="playground" width="1800" height="1000" style="border:1px solid #d3d3d3;">no canvas support</canvas>
<canvas id="menu" width="1800" height="1000" style="border:1px solid #d3d3d3;">no canvas support</canvas>

<script src="./src/defines.js"></script>
<script src="./src/button.js"></script>
<script src="./src/component.js"></script>
<script src="./src/terminal.js"></script>
<script src="./src/source.js"></script>
<script src="./src/loads/lamp.js"></script>
<script src="./src/loads/motor.js"></script>
<script src="./src/switches/s101.js"></script>
<script src="./src/switches/s102.js"></script>
<script src="./src/switches/s106.js"></script>
<script src="./src/switches/stime.js"></script>
<script src="./src/switches/scontactor.js"></script>
<script src="./src/components/microelectronics/two_pole.js"></script>
<script src="./src/components/microelectronics/resistor.js"></script>
<script src="./src/components/microelectronics/capacitor.js"></script>
<script src="./src/components/microelectronics/inductor.js"></script>
<script src="./src/components/microelectronics/voltage_source.js"></script>
<script src="./src/components/microelectronics/current_source.js"></script>
<script src="./src/jbox.js"></script>
<script src="./src/wire.js"></script>
<script src="./src/scene.js"></script>
<script src="./src/menu.js"></script>
<script>
    var playground = document.getElementById('playground');
    var menuCanvas = document.getElementById('menu');

    playground.style.position = 'absolute';
    playground.style.left = 0 + 'px';
    playground.style.top = 0 + 'px';
    playground.width = 3.0/4.0 * window.innerWidth;
    playground.height = window.innerHeight;

    menuCanvas.style.position = 'absolute';
    menuCanvas.style.left = 3.0/4.0 * window.innerWidth + 'px';
    menuCanvas.style.top = 0 + 'px';
    menuCanvas.width = 1.0/4.0 * window.innerWidth;
    menuCanvas.height = window.innerHeight;
    
    var scene = new CScene(playground);
    var menu = new CMenu(3.0/4.0 * window.innerWidth, 0, menuCanvas, scene);

    const resistor_img = new Image();
    resistor_img.src = 'assets/svg/resistor.svg';
    resistor_img.onload = function() { scene.redraw(); };
    resistor_img.onerror = function() { console.error("failed to load resistor image"); };

    scene.components.push(new CSource(10 * scale, 100 * scale));
    
    scene.components.push(new CResistor(50 * scale, 200 * scale, resistor_img));

    scene.components.push(new CJunctionBox(100 * scale, 500 * scale));
    scene.components.push(new CJunctionBox(500 * scale, 500 * scale));
    scene.components.push(new CJunctionBox(900 * scale, 500 * scale));
    scene.components.push(new CJunctionBox(1300 * scale, 500 * scale));

    scene.components.push(new CLamp(600 * scale, 100 * scale));
    scene.components.push(new CLamp(900 * scale, 100 * scale));
    scene.components.push(new CLamp(1200 * scale, 100 * scale));
    scene.components.push(new CLamp(1500 * scale, 100 * scale));

    scene.components.push(new CSwitch101(100 * scale, 750 * scale));
    scene.components.push(new CSwitch101(500 * scale, 750 * scale));
    var timeSwitch = new CTimeSwitch(900 * scale, 750 * scale);
    scene.components.push(timeSwitch);
    scene.components.push(new CSwitch102(1300 * scale, 750 * scale));
    scene.components.push(new CSwitch106(1600 * scale, 500 * scale));
    scene.components.push(new CSwitch106(1600 * scale, 750 * scale));

    scene.components.push(new C3PhaseMotor(600 * scale, 350 * scale));
    scene.components.push(new CContactor(250 * scale, 350 * scale));

    function timeElapsed () {
        timeSwitch.do_stuff();
        scene.redraw();
    }

    scene.redraw();
    menu.redraw();
</script> 

</body>
</html>